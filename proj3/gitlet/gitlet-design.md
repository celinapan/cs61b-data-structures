# Gitlet Design Document

***Name***: Trang Van

## Classes and Data Structures

---
### Classes

---

### Main

- `main` switches on `arg[0]`, which will be the commands
- `validateArgument`- checks the arguments before calling the function
- `some function` - check the 2 failure cases not related to command arguments

### Command

- all expected commands like init, add, etc. `Main` initializes this class to call the commands. Doesn't construct anything

### Commit implements Serializable

- Fields:

    `String _message` - metadata

    `String _datetime` - metadata 

    `String _parent` - holds SHA-1 reference to previous commit

    `String _uid` - SHA-1 for Commit object - i.e.  `Utils.sha1(this)`

    `String _branch` - holds SHA-1 reference for the branch it belongs to

    `HashMap<String, byte[]> allBlobs` - file UID generated by SHA-1 & file contents serialized; stored for constant time lookup. Can be used to checkout files 

    `ArrayList<String> _trackedFiles` - Used by Commit Object to store all files it's tracking at that snapshot. Holding onto only file UID

- Methods
    - SImple Getters for metadata attributes
    - `getCommitTime`- sets `_datetime` using SimpleDateFormatter
    - `setUID(Commit co)` - returns `Utils.sha1(co)`
    - `makeBlob(File f)` - generates `fileUID` via SHA-1 and serializes file contents, adds to `_allBlobs`
    - `commitBlobs` - add keys of `_allBlobs` to `ArrayList`
        - NOT IMPLEMENTED: Hashtable with folders (folder name: 1st two characters of sha-1) and put blobs under the corresponding folder
    - `fromFile(String filename)`- reads object with filename (sha-1 reference)
    - `saveCommit` - gets the UID and writes object, passing in `this`

### Branch implements Serializable

- Fields:
    - `_branchUID` - each branch has a specific UID that commit can reference
    - `_branchName` - name specified by user, unless it's the master branch
    - `_head` - references the current branch
    - `_isMaster` - returns true if program creates master branch initially
    - `HashMap<String, ArrayList<String>> _allCommits` - key: branch name, value: list of all commits made on that branch
        - Latest commit is the last item on the list
- Methods
    - Constructor & Getters for attributes
    - `setUID(Branch b)` - similar to Commit, returns `Utils.sha1(b.toString())

        â‡’ tried to pass in b but errored `Improper Type to sha`

    - `updateCurrent(Commit co)` - changes the `_head` pointer to the commit's UID.
    - `addCommit(Commit co, Branch b)` - get branch name and put the commit UID into the ArrayList at corresponding key
    - `fromFile(String filename)` - similar to Commit, except with Branch object
    - `saveBranch` - writes the branch UID to the file named by the `_branchName`